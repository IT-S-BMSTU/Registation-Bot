
# ITS BMSTU Registration Bot

# Описание Работы с БД

## Методы для создания бота-опросника

### `bot_create()` - создает таблицы в базе данных (1 - с вопросами, 2 - для ответов)

<details><summary>Входные данные</summary>

* ID бота (для названия таблиц)
* Дерево с вопросами, созданное конструктором

</details>

<details><summary>Действия</summary>

* Создание таблицы `id{id бота}_questions`
* Помещение информации в таблицу `id{id бота}_questions`
* Создание таблицы `id{id бота}_answers` со столбцами TEXT `prev_id = 0`, `now_id = 1` и 
столбцами под ответы на все вопросы и праймари-кей столбцом с ID пользователей

</details>

### `bot_delete()` - удаляет таблицы бота с вопросами и ответами

<details><summary>Входные данные</summary>

* ID бота (название таблиц)

</details>

<details><summary>Действия</summary>

* Удаление таблицы `id{id бота}_questions`
* Удаление таблицы `id{id бота}_answers`

</details>

## Методы для общения с опрашиваемым

### `add_user()` - добавление строки под пользователя

<details><summary>Входные данные</summary>

* ID бота (название таблиц)
* ID пользователя

</details>

<details><summary>Действия</summary>

* Вывод пользователю первого вопроса

</details>

### `get_next_question()` - получение ответа и вывод следующего вопроса

<details><summary>Входные данные</summary>

* ID бота (название таблиц)
* ID пользователя
* Ответ пользователя

</details>

<details><summary>Действия</summary>

* Принимается ответ пользователя и записывается в таблицу `id{id бота}_answers` под ID `now_id`
* Текущий ID вопроса через "/" добавляется к `prev_id` в таблице `id{id бота}_answers`
* Ответ пользователя анализируется и ID следующего вопроса записывается в `now_id`
* Пользователю выводится вопрос под ID `now_id` из таблицы `id{id бота}_questions`

</details>

### `get_prev_question()` - получение предыдущего вопроса

<details><summary>Входные данные</summary>

* ID бота (название таблиц)
* ID пользователя

</details>

<details><summary>Действия</summary>

* Берется последний ID из `prev_id` и информация по нему выводится пользователю,
если пользователь хочет изменить введенную информацию - вызывается метод `change_info()`,
если пользователь хочет вернуться еще на вопрос назад - берется предыдущий ID из `prev_id`
и так далее

</details>

### `change_info()` - изменить ответ на вопрос по ID

<details><summary>Входные данные</summary>

* ID бота(название таблицы)
* ID пользователя
* ID вопроса

</details>

<details><summary>Действия</summary>

* Метод принимает ответ пользователя и записывает его в `id{id бота}_answers` под переданным
в аргументах ID

</details>
